import puppeteer from "puppeteer";
import sleep from "../utils/sleep.js";
import fs from "fs";
import arrayOfObjectsToCSV from "../utils/arrayOfObjectsToCSV.js";

const urls = [
  "https://github.com/ry",
  "https://github.com/jeresig",
  "https://github.com/domenic",
  "https://github.com/Rich-Harris",
  "https://github.com/orta",
  "https://github.com/FiloSottile",
  "https://github.com/zephraph",
  "https://github.com/jxnblk",
  "https://github.com/JoshuaKGoldberg",
  "https://github.com/benjamn",
  "https://github.com/jaredpalmer",
  "https://github.com/transitive-bullshit",
  "https://github.com/Huxpro",
  "https://github.com/sebmarkbage",
  "https://github.com/jayschwa",
  "https://github.com/rnystrom",
  "https://github.com/tholman",
  "https://github.com/indexzero",
  "https://github.com/lorensr",
  "https://github.com/chadhietala",
  "https://github.com/swannodette",
  "https://github.com/calebporzio",
  "https://github.com/tarrencev",
  "https://github.com/clehner",
  "https://github.com/paulmelnikow",
  "https://github.com/peggyrayzis",
  "https://github.com/jordansinger",
  "https://github.com/bnb",
  "https://github.com/jwerle",
  "https://github.com/terkelg",
  "https://github.com/evertonfraga",
  "https://github.com/eliperkins",
  "https://github.com/joshblum",
  "https://github.com/dguido",
  "https://github.com/brettlangdon",
  "https://github.com/kosamari",
  "https://github.com/mhart",
  "https://github.com/fjcaetano",
  "https://github.com/vinnyA3",
  "https://github.com/hmarr",
  "https://github.com/Marak",
  "https://github.com/frnsys",
  "https://github.com/chirag04",
  "https://github.com/caiogondim",
  "https://github.com/caffix",
  "https://github.com/dterracino",
  "https://github.com/trishume",
  "https://github.com/taion",
  "https://github.com/nandorojo",
  "https://github.com/jclem",
  "https://github.com/harrysolovay",
  "https://github.com/BenjaminVanRyseghem",
  "https://github.com/cjroth",
  "https://github.com/jamiew",
  "https://github.com/zzmp",
  "https://github.com/raineorshine",
  "https://github.com/SaraJo",
  "https://github.com/ianlapham",
  "https://github.com/paulgb",
  "https://github.com/tjhorner",
  "https://github.com/donavon",
  "https://github.com/digitallysavvy",
  "https://github.com/cds-amal",
  "https://github.com/aholachek",
  "https://github.com/shrugs",
  "https://github.com/timc1",
  "https://github.com/podefr",
  "https://github.com/JesseTG",
  "https://github.com/iainnash",
  "https://github.com/dominiek",
  "https://github.com/DZGoldman",
  "https://github.com/lettier",
  "https://github.com/DylanVann",
  "https://github.com/shea256",
  "https://github.com/naoufal",
  "https://github.com/fabriziogiordano",
  "https://github.com/brianloveswords",
  "https://github.com/flaurida",
  "https://github.com/pdaian",
  "https://github.com/meowgorithm",
  "https://github.com/iamkevingreen",
  "https://github.com/lvwrence",
  "https://github.com/bradley",
  "https://github.com/bahamas10",
  "https://github.com/bl4ck5un",
  "https://github.com/jonsamp",
  "https://github.com/WIZARDISHUNGRY",
  "https://github.com/nkrishang",
  "https://github.com/lrettig",
  "https://github.com/kamescg",
  "https://github.com/brunobar79",
  "https://github.com/lukevs",
  "https://github.com/jclancy93",
  "https://github.com/thejsj",
  "https://github.com/skellet0r",
  "https://github.com/DevonYarbrough",
  "https://github.com/akeem",
  "https://github.com/tyndallm",
  "https://github.com/pleerock",
  "https://github.com/chrisabrams",
  "https://github.com/enaeher",
  "https://github.com/gkaemmer",
  "https://github.com/starsirius",
  "https://github.com/georgiamoon",
  "https://github.com/morenoh149",
  "https://github.com/davo",
  "https://github.com/maxim",
  "https://github.com/penandlim",
  "https://github.com/pj4533",
  "https://github.com/nucleartide",
  "https://github.com/andrewchilds",
  "https://github.com/s4y",
  "https://github.com/nate-parrott",
  "https://github.com/zmitton",
  "https://github.com/shiftyp",
  "https://github.com/justinkchen",
  "https://github.com/JFrankfurt",
  "https://github.com/nvonpentz",
  "https://github.com/isaac-martin",
  "https://github.com/ilyausorov",
  "https://github.com/michaelvillar",
  "https://github.com/benschac",
  "https://github.com/benoitdion",
  "https://github.com/delapuente",
  "https://github.com/achou11",
  "https://github.com/smancebo",
  "https://github.com/setsun",
  "https://github.com/codfish",
  "https://github.com/asmr-hex",
  "https://github.com/jeremyheiler",
  "https://github.com/floating",
  "https://github.com/japesinator",
  "https://github.com/OhJia",
  "https://github.com/joshjhargreaves",
  "https://github.com/zeh",
  "https://github.com/ox",
  "https://github.com/ianrtracey",
  "https://github.com/alexanderatallah",
  "https://github.com/suyesh",
  "https://github.com/Ashoat",
  "https://github.com/randymeech",
  "https://github.com/jessetane",
  "https://github.com/maxtaco",
  "https://github.com/sursly",
  "https://github.com/noahlevenson",
  "https://github.com/Dan-Nolan",
  "https://github.com/jbrukh",
  "https://github.com/liamgriffiths",
  "https://github.com/johanneslumpe",
  "https://github.com/blobitty",
  "https://github.com/artivilla",
  "https://github.com/JonathanAmenechi",
  "https://github.com/jlukic",
  "https://github.com/haydenadams",
  "https://github.com/samepant",
  "https://github.com/rootulp",
  "https://github.com/brysgo",
  "https://github.com/catdad",
  "https://github.com/jshakes",
  "https://github.com/aldenquimby",
  "https://github.com/sotojuan",
  "https://github.com/julien51",
  "https://github.com/yasmeen",
  "https://github.com/yawnr",
  "https://github.com/nickdandakis",
  "https://github.com/michaelcohen716",
  "https://github.com/ethanbennett",
  "https://github.com/hensha256",
  "https://github.com/krrishd",
  "https://github.com/hoodsy",
  "https://github.com/juliamae",
  "https://github.com/developerfranky",
  "https://github.com/pmarsceill",
  "https://github.com/dictions",
  "https://github.com/jsoma",
  "https://github.com/evancasey",
  "https://github.com/urbien",
  "https://github.com/iwillig",
  "https://github.com/jparklev",
  "https://github.com/mikedubcurry",
  "https://github.com/sigmachirality",
  "https://github.com/kinrezC",
  "https://github.com/danhemerlein",
  "https://github.com/sergiitk",
  "https://github.com/iChauster",
  "https://github.com/YannikSood",
  "https://github.com/trinityXmontoya",
  "https://github.com/Jspsun",
  "https://github.com/endorphin",
  "https://github.com/poundifdef",
  "https://github.com/corydickson",
  "https://github.com/mondaychen",
  "https://github.com/samsends",
  "https://github.com/teonbrooks",
  "https://github.com/da-bao-jian",
  "https://github.com/scyclow",
  "https://github.com/zachferland",
  "https://github.com/allenhj",
  "https://github.com/skellock",
  "https://github.com/vanev",
  "https://github.com/wardbradt",
  "https://github.com/rohailaltaf",
  "https://github.com/aj-may",
  "https://github.com/adisrini",
  "https://github.com/derHowie",
  "https://github.com/droconnel22",
  "https://github.com/trozler",
  "https://github.com/branmcf",
  "https://github.com/jaypaik",
  "https://github.com/blokboy",
  "https://github.com/mikelambert",
  "https://github.com/xyfeng",
  "https://github.com/jgv",
  "https://github.com/SRandazzo",
  "https://github.com/lleadbet",
  "https://github.com/MagRelo",
  "https://github.com/alexanderattar",
  "https://github.com/christianbaroni",
  "https://github.com/roveneliah",
  "https://github.com/Schwartz10",
  "https://github.com/cmmartin",
  "https://github.com/bakerac4",
  "https://github.com/zachdt",
  "https://github.com/philbirt",
  "https://github.com/solon",
  "https://github.com/rajivpo",
  "https://github.com/imthatcarlos",
  "https://github.com/gauthamchandra",
  "https://github.com/malgorithms",
  "https://github.com/dereknelson",
  "https://github.com/twelve17",
  "https://github.com/clifton",
  "https://github.com/pcooney10",
  "https://github.com/adriancbo",
  "https://github.com/nicoglennon",
  "https://github.com/atulsmadhugiri",
  "https://github.com/davidgovea",
  "https://github.com/joewood",
  "https://github.com/tobyjaguar",
  "https://github.com/willhennessy",
  "https://github.com/gagejustins",
  "https://github.com/sethfork",
  "https://github.com/nelsondude",
  "https://github.com/jmr0",
  "https://github.com/janewang",
  "https://github.com/virakri",
  "https://github.com/monosux",
  "https://github.com/evcohen",
  "https://github.com/mightyguava",
  "https://github.com/jeffscottward",
  "https://github.com/mcernusca",
  "https://github.com/HughIsaacs2",
  "https://github.com/billmalarky",
  "https://github.com/jghlt",
  "https://github.com/mskd12",
  "https://github.com/YuHuaCheng",
  "https://github.com/allgamesallfree",
  "https://github.com/wmcbain",
  "https://github.com/DrewMcArthur",
  "https://github.com/specik",
  "https://github.com/kenbier",
  "https://github.com/wontaeyang",
  "https://github.com/Anthonysokolov",
  "https://github.com/gelstudios",
  "https://github.com/sloreti",
  "https://github.com/pyankoff",
  "https://github.com/revelcw",
  "https://github.com/QuentinCWG",
  "https://github.com/michalwols",
  "https://github.com/colekennelly1",
  "https://github.com/pojala",
  "https://github.com/robertjwhitney",
  "https://github.com/julianlconnor",
  "https://github.com/kushalbabel",
  "https://github.com/VjiaoBlack",
  "https://github.com/jacob-eliosoff",
  "https://github.com/uniquehash",
  "https://github.com/danielmichaelni",
  "https://github.com/bengold",
  "https://github.com/NewSky54",
  "https://github.com/obibring",
  "https://github.com/perich",
  "https://github.com/benediamond",
  "https://github.com/brokentone",
  "https://github.com/jastronaut",
  "https://github.com/kevinfan23",
  "https://github.com/ebensing",
  "https://github.com/manicakes",
  "https://github.com/solumos",
  "https://github.com/stevennevins",
  "https://github.com/amlcodes",
  "https://github.com/jlwaugh",
  "https://github.com/aaemman",
  "https://github.com/uvilchis",
  "https://github.com/0xpbj",
  "https://github.com/juvoni",
  "https://github.com/jmlubin",
  "https://github.com/hav-noms",
  "https://github.com/antsankov",
  "https://github.com/martinbigio",
  "https://github.com/kschrader",
  "https://github.com/EmperorEarth",
  "https://github.com/luojeff",
  "https://github.com/johnxie",
  "https://github.com/jasoncoooks",
  "https://github.com/rollsmorr1",
  "https://github.com/nickcherry",
  "https://github.com/julson",
  "https://github.com/georgek146",
  "https://github.com/adamfraser",
  "https://github.com/finnstra",
  "https://github.com/l2succes",
  "https://github.com/ranji2612",
  "https://github.com/amcassetti",
  "https://github.com/mikhailio",
  "https://github.com/brianjckim",
  "https://github.com/nickokgo",
  "https://github.com/amykyta",
  "https://github.com/markmalazarte",
  "https://github.com/mogauvin",
  "https://github.com/tjohnson1106",
  "https://github.com/mrose",
  "https://github.com/nicksedz",
  "https://github.com/benjamarle",
  "https://github.com/acrylicstyle",
  "https://github.com/jxwang0",
  "https://github.com/oshatken",
  "https://github.com/Kemybablo",
  "https://github.com/waqidvolli",
  "https://github.com/wgmiller",
  "https://github.com/m43bloe",
  "https://github.com/rollsmorr",
  "https://github.com/mfein357",
];

const arr = {};
const browser = await puppeteer.launch();
for (const url of urls) {
  const page = await browser.newPage();
  await page.goto(url);
  await sleep(2000);
  const following = await page.$(
    ".flex-order-1.flex-md-order-none.mt-2.mt-md-0 > div > a:nth-child(2) > span"
  );

  if (following) {
    const num = await page.evaluate((e) => e.innerText, following);
    arr[url] = num;
    console.log(num);
  }

  await page.close();
}
let dataStream = fs.createWriteStream("../../data/following.json", {
  flags: "a",
});
dataStream.write(JSON.stringify(arr));
dataStream.end();
